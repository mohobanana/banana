# 一、处理消息边界
## 方式
1.客户端服务器约定好固定消息长度（浪费带宽） 

2.使用/n分隔符进行分割（效率低）

3.TLV格式：Type类型、Length长度、Value数据（需要提前分配buffer，如果内容太大，影响server吞吐量）  
&ensp;&ensp;Http 1.0:TLV格式  
&ensp;&ensp;Http 2.0:LTV格式

# 二、ByteBuffer大小分配
ByteBuffer非线程安全，因此每个channel需要单独维护一个独立的ByteBuffer

ByteBuffer不能太大，需要设计大小可变的ByteBuffer  
1.先分配一个较小的Buffer，如果发现数据不够，扩容  
&ensp;&ensp;&ensp;&ensp;优点：消息容易连续  
&ensp;&ensp;&ensp;&ensp;缺点：数据拷贝耗费性能  
2.用多个数组组成buffer，一个不够，把多出来的写入新数组  
&ensp;&ensp;&ensp;&ensp;优点：避免拷贝引起的性能损耗   
&ensp;&ensp;&ensp;&ensp;缺点：消息不容易连续 
